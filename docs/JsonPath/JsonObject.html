<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="robots" content="index, follow, all" />
    <title>JsonPath\JsonObject | JsonPath</title>

            <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="../css/bootstrap-theme.min.css">
        <link rel="stylesheet" type="text/css" href="../css/sami.css">
        <script src="../js/jquery-1.11.1.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
        <script src="../js/typeahead.min.js"></script>
        <script src="../sami.js"></script>
        <meta name="MobileOptimized" content="width">
        <meta name="HandheldFriendly" content="true">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    
    
    </head>

    <body id="class" data-name="class:JsonPath_JsonObject" data-root-path="../">
            <div id="content">
        <div id="left-column">
                <div id="control-panel">
                <form id="search-form" action="../search.html" method="GET">
            <span class="glyphicon glyphicon-search"></span>
            <input name="search"
                   class="typeahead form-control"
                   type="search"
                   placeholder="Search">
        </form>
    </div>

                <div id="api-tree"></div>

        </div>
        <div id="right-column">
                <nav id="site-nav" class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-elements">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../index.html">JsonPath</a>
            </div>
            <div class="collapse navbar-collapse" id="navbar-elements">
                <ul class="nav navbar-nav">
                    <li><a href="../classes.html">Classes</a></li>
                                            <li><a href="../namespaces.html">Namespaces</a></li>
                                        <li><a href="../interfaces.html">Interfaces</a></li>
                    <li><a href="../traits.html">Traits</a></li>
                    <li><a href="../doc-index.html">Index</a></li>
                    <li><a href="../search.html">Search</a></li>
                </ul>
            </div>
        </div>
    </nav>

                        <div class="namespace-breadcrumbs">
            <ol class="breadcrumb">
                <li><span class="label label-default">class</span></li>
                                                            <li><a href="../JsonPath.html">JsonPath</a></li>
    
                <li>JsonObject</li>
            </ol>
        </div>
                <div id="page-content">
                
    <div class="page-header">
        <h1>JsonObject</h1>
    </div>

    <p>    class
    <strong>JsonObject</strong>
</p>

            <div class="description">
            <p>This is a <a href="http://goessner.net/articles/JsonPath/">JSONPath</a> implementation for PHP.</p>            <p>This implementation features all elements in the specification except the <code>()</code> operator
which isn't implemented as I really couldn't come up with a case that it'd be usefull
(In the spcecification there is the <code>$..a[(@.length-1)]</code>, but this can be achieved with <code>$..a[-1]</code>
and the later is simpler).</p>

<p>On top of this it implements following extended features:</p>

<ul>
<li>Regex match comparisons (p.e. <code>$.store.book[?(@.author =~ /.*Tolkien/)]</code>)</li>
<li>For the child operator <code>[]</code> there is no need to surround child names with quotes (p.e. <code>$.[store][book, bicycle]</code>) except the name of the field is a non-valid javascript variable name.</li>
<li><code>.length</code> can be used to get the length of a string, get the length of an array and to check if a node has childs.</li>
</ul>

<h1>Features</h1>

<p>This implementation has the following features:</p>

<ul>
<li>Object oriented implementation.</li>
<li><strong>Get</strong>, <strong>set</strong> and <strong>add</strong> operations.</li>
<li>Magick methods:

<ul>
<li><code>__get</code>: <code>$obj-&gt;{'$.json.path'}</code>.</li>
<li><code>__set</code>: <code>$obj-&gt;{'$.json.path'} = $val</code>.</li>
<li><code>__toString</code>: <code>echo $obj</code> prints the json representation of the JsonObject.</li>
</ul></li>
<li>Not using <code>eval()</code>.</li>
</ul>

<h1>Usage</h1>

<pre><code>  // $json can be a string containing json, a PHP array, a PHP object or null.
  // If $json is null (or not present) the JsonObject will be empty.
  $jsonObject = new JsonObject();
  // or
  $jsonObject = new JsonObject($json);

  // get
  $obj-&gt;get($jsonPath);
  $obj-&gt;{'$.json.path'};

  // set
  $obj-&gt;set($jsonPath, $value);
  $obj-&gt;{'$.json.path'} = $value;

  // get the json representation
  $obj-&gt;getJson();
  $str = (string)$obj;
  echo $obj;

  // get the PHP array representation
  $obj-&gt;getArray();

  // add values
  $obj-&gt;add($jsonPath, $value[, $field]);

  // remove values
  $obj-&gt;remove($jsonPath, $field);
</code></pre>

<h2>SmartGet</h2>

<p>When creating a new instance of JsonObject, you can pass a second parameter to the constructor.
This sets the behaviour of the instance to use SmartGet.</p>

<p>What SmartGet does is to determine if the given JsonPath branches at some point, if it does it behaves as usual;
otherwise, it will directly return the value pointed by the given path (not the array containing it).</p>

<pre><code> $json = array(
     "a" =&gt; array(
         "b" =&gt; 3,
         "c" =&gt; 4
     )
 );
 $obj = new JsonObject($json, true);
 $obj-&gt;get('$.a.b'); // Returns int(3)
 $obj-&gt;get('$.a.*'); // Returns array(int(3), int(4))
</code></pre>

<h2>GetJsonObjects</h2>

<p>Sometimes you need to access multiple values of a subobject that has a long prefix (p.e. <code>$.a.very.long.prefix.for.[*].object</code>), in this case you would first get said object
and make a JsonObject of it and then access its properties.</p>

<p>Now if you want to edit the object (set or add values) and want these changes to affect the original object, the way of doing this is by using
<code>JsonObject::getJsonObjects($jsonpath)</code>. This method works the same way get does, but it will return the results as JsonObject instances containing a reference to the value in the source JsonObject.</p>        </div>
    
    
            <h2>Constants</h2>

            <table class="table table-condensed">
                    <tr>
                <td>RE_ROOT_OBJECT</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>RE_CHILD_NAME</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>RE_RECURSIVE_SELECTOR</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>RE_ARRAY_INTERVAL</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>RE_INDEX_LIST</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>RE_LENGTH</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>RE_CHILD_NAME_LIST</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>RE_COMPARISON</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>RE_STRING</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>RE_REGEX_EXPR</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>RE_NEXT_SUBEXPR</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>RE_OR</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>RE_AND</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>RE_NOT</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_ROOT</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_CHILD</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_SELECTOR_BEGIN</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_SELECTOR_END</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_BOOL_EXPR</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_EXPRESSION_BEGIN</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_EXPRESSION_END</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_ALL</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_COMA</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_COLON</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_COMP_EQ</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_COMP_NEQ</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_COMP_LT</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_COMP_GT</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_COMP_LTE</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_COMP_GTE</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_COMP_RE_MATCH</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_TRUE</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_FALSE</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
                    <tr>
                <td>TOK_NULL</td>
                <td class="last">
                    <p><em>
</em></p>
                    <p>
</p>
                </td>
            </tr>
            </table>

    
    
            <h2>Methods</h2>

            <div class="container-fluid underlined">
                    <div class="row">
                <div class="col-md-2 type">
                    
    array
                </div>
                <div class="col-md-8 type">
                    <a href="#method_getValue">getValue</a>()
                                            <p>Returns the value of the json object as a PHP array.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
    string
                </div>
                <div class="col-md-8 type">
                    <a href="#method_getJson">getJson</a>()
                                            <p>Returns the json object encoded as string.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
    mixed
                </div>
                <div class="col-md-8 type">
                    <a href="#method_get">get</a>(
    string $jsonPath)
                                            <p>Returns an array containing references to the
objects that match the JsonPath. If the result is
empty returns false.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
    mixed
                </div>
                <div class="col-md-8 type">
                    <a href="#method_getJsonObjects">getJsonObjects</a>(
    string $jsonPath)
                                            <p>Return an array of new JsonObjects representing the results of the
given JsonPath. These objects contain references to the elements in the
original JsonObject.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
    <a href="../JsonPath/JsonObject.html"><abbr title="JsonPath\JsonObject">JsonObject</abbr></a>
                </div>
                <div class="col-md-8 type">
                    <a href="#method_set">set</a>(
    string $jsonPath, 
    mixed $value)
                                            <p>Sets all elements that result from the $jsonPath query
to $value. This method returns $this to enable fluent
interface.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
    <a href="../JsonPath/JsonObject.html"><abbr title="JsonPath\JsonObject">JsonObject</abbr></a>
                </div>
                <div class="col-md-8 type">
                    <a href="#method_add">add</a>(
    string $jsonPath, 
    mixed $value, 
    string $field = null)
                                            <p>Append a new value to all json objects/arrays that match
the $jsonPath path. If $field is not null, the new value
will be added with $field as key (this will transform
json arrays into objects). This method returns $this to
enable fluent interface.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
    <a href="../JsonPath/JsonObject.html"><abbr title="JsonPath\JsonObject">JsonObject</abbr></a>
                </div>
                <div class="col-md-8 type">
                    <a href="#method_remove">remove</a>(
    mixed $jsonPath, 
    mixed $field)
                                            <p>Remove $field from json objects/arrays that match
$jsonPath path. This method returns $this to enable
fluent interface.</p>                </div>
                <div class="col-md-2"></div>
            </div>
            </div>


        <h2>Details</h2>

            <div id="method-details">
                    <div class="method-item">
                    <h3 id="method_getValue">
        <div class="location">at line 235</div>
        <code>                    
    array
    <strong>getValue</strong>()</code>
    </h3>
    <div class="details">
                    <div class="method-description">
                                    <p>Returns the value of the json object as a PHP array.</p>                                </div>
                <div class="tags">
            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>
    array</td>
            <td>
</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_getJson">
        <div class="location">at line 246</div>
        <code>                    
    string
    <strong>getJson</strong>()</code>
    </h3>
    <div class="details">
                    <div class="method-description">
                                    <p>Returns the json object encoded as string.</p>                                </div>
                <div class="tags">
            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>
    string</td>
            <td>
</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_get">
        <div class="location">at line 264</div>
        <code>                    
    mixed
    <strong>get</strong>(
    string $jsonPath)</code>
    </h3>
    <div class="details">
                    <div class="method-description">
                                    <p>Returns an array containing references to the
objects that match the JsonPath. If the result is
empty returns false.</p>                    <p>If smartGet was set to true when creating the instance and
the JsonPath given does not branch, it will return the value
instead of an array of one element.</p>            </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
    string</td>
                <td>$jsonPath</td>
                <td>jsonPath</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>
    mixed</td>
            <td>
</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_getJsonObjects">
        <div class="location">at line 290</div>
        <code>                    
    mixed
    <strong>getJsonObjects</strong>(
    string $jsonPath)</code>
    </h3>
    <div class="details">
                    <div class="method-description">
                                    <p>Return an array of new JsonObjects representing the results of the
given JsonPath. These objects contain references to the elements in the
original JsonObject.</p>                    <p>This is affected by smartGet the same way JsonObject::get is affected
 This can cause JsonObject to have actual values (not object/array) as root.</p>

<p>This is useful when you want to work with a subelement of the root
object and you want to edit (add, set, remove) values in that subelement
and that these changes also affect the root object.</p>            </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
    string</td>
                <td>$jsonPath</td>
                <td>jsonPath</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>
    mixed</td>
            <td>
</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_set">
        <div class="location">at line 319</div>
        <code>                    
    <a href="../JsonPath/JsonObject.html"><abbr title="JsonPath\JsonObject">JsonObject</abbr></a>
    <strong>set</strong>(
    string $jsonPath, 
    mixed $value)</code>
    </h3>
    <div class="details">
                    <div class="method-description">
                                    <p>Sets all elements that result from the $jsonPath query
to $value. This method returns $this to enable fluent
interface.</p>                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
    string</td>
                <td>$jsonPath</td>
                <td>jsonPath</td>
            </tr>
                    <tr>
                <td>
    mixed</td>
                <td>$value</td>
                <td>value</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>
    <a href="../JsonPath/JsonObject.html"><abbr title="JsonPath\JsonObject">JsonObject</abbr></a></td>
            <td>
</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_add">
        <div class="location">at line 343</div>
        <code>                    
    <a href="../JsonPath/JsonObject.html"><abbr title="JsonPath\JsonObject">JsonObject</abbr></a>
    <strong>add</strong>(
    string $jsonPath, 
    mixed $value, 
    string $field = null)</code>
    </h3>
    <div class="details">
                    <div class="method-description">
                                    <p>Append a new value to all json objects/arrays that match
the $jsonPath path. If $field is not null, the new value
will be added with $field as key (this will transform
json arrays into objects). This method returns $this to
enable fluent interface.</p>                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
    string</td>
                <td>$jsonPath</td>
                <td>jsonPath</td>
            </tr>
                    <tr>
                <td>
    mixed</td>
                <td>$value</td>
                <td>value</td>
            </tr>
                    <tr>
                <td>
    string</td>
                <td>$field</td>
                <td>field</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>
    <a href="../JsonPath/JsonObject.html"><abbr title="JsonPath\JsonObject">JsonObject</abbr></a></td>
            <td>
</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_remove">
        <div class="location">at line 369</div>
        <code>                    
    <a href="../JsonPath/JsonObject.html"><abbr title="JsonPath\JsonObject">JsonObject</abbr></a>
    <strong>remove</strong>(
    mixed $jsonPath, 
    mixed $field)</code>
    </h3>
    <div class="details">
                    <div class="method-description">
                                    <p>Remove $field from json objects/arrays that match
$jsonPath path. This method returns $this to enable
fluent interface.</p>                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
    mixed</td>
                <td>$jsonPath</td>
                <td>jsonPath</td>
            </tr>
                    <tr>
                <td>
    mixed</td>
                <td>$field</td>
                <td>field</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>
    <a href="../JsonPath/JsonObject.html"><abbr title="JsonPath\JsonObject">JsonObject</abbr></a></td>
            <td>
</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
            </div>

    
            </div>
                <div id="footer">
        Generated by <a href="http://sami.sensiolabs.org/">Sami, the API Documentation Generator</a>.
    </div>

        </div>
    </div>
    </body>

</html>
